"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[66565],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),l=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=l(e.components);return a.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=l(n),m=r,f=u["".concat(p,".").concat(m)]||u[m]||d[m]||i;return n?a.createElement(f,o(o({ref:t},c),{},{components:n})):a.createElement(f,o({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=u;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var l=2;l<i;l++)o[l]=n[l];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},94533:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var a=n(87462),r=(n(67294),n(3905));const i={id:"release",sidebar_label:"Releases"},o="Release",s={unversionedId:"concepts/release",id:"concepts/release",title:"Release",description:"Release is used to indicate a single operation, triggered only by apply and destroy, providing users with a more coherent and consistent operation experience with Kusion. Release also provides audit and rollback capabilities, which is currently under development.",source:"@site/docs/kusion/3-concepts/8-release.md",sourceDirName:"3-concepts",slug:"/concepts/release",permalink:"/docs/next/concepts/release",draft:!1,editUrl:"https://github.com/KusionStack/kusionstack.io/blob/main/docs/kusion/3-concepts/8-release.md",tags:[],version:"current",lastUpdatedBy:"jinjia",lastUpdatedAt:1739183700,formattedLastUpdatedAt:"Feb 10, 2025",sidebarPosition:8,frontMatter:{id:"release",sidebar_label:"Releases"},sidebar:"kusion",previous:{title:"Managing backends with Kusion CLI",permalink:"/docs/next/concepts/backend/managing-backends-with-cli"},next:{title:"Runs",permalink:"/docs/next/concepts/runs"}},p={},l=[{value:"State",id:"state",level:2},{value:"Concurrency Control",id:"concurrency-control",level:2}],c={toc:l};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"release"},"Release"),(0,r.kt)("p",null,"Release is used to indicate a single operation, triggered only by ",(0,r.kt)("inlineCode",{parentName:"p"},"apply")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"destroy"),", providing users with a more coherent and consistent operation experience with Kusion. Release also provides audit and rollback capabilities, which is currently under development."),(0,r.kt)("p",null,"Every time an ",(0,r.kt)("inlineCode",{parentName:"p"},"apply")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"destroy")," operation is executed, it will trigger the generation of a ",(0,r.kt)("inlineCode",{parentName:"p"},"release")," file. The combination of a ",(0,r.kt)("inlineCode",{parentName:"p"},"project")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"workspace")," corresponds to a set of ",(0,r.kt)("inlineCode",{parentName:"p"},"release")," files, which also relates to a set of the real application resources. The ",(0,r.kt)("inlineCode",{parentName:"p"},"release")," file is stored in the same ",(0,r.kt)("inlineCode",{parentName:"p"},"backend")," as the ",(0,r.kt)("inlineCode",{parentName:"p"},"workspace"),", and the default path is ",(0,r.kt)("inlineCode",{parentName:"p"},"releases/$PROJECT_NAME/$WORKSPACE_NAME"),", whose revision starts from 1 and increments."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"For kusion server, the default release path is ",(0,r.kt)("inlineCode",{parentName:"p"},"releases/server/$SOURCE_NAME/$PROJECT_NAME/$WORKSPACE_NAME"))),(0,r.kt)("p",null,"The release file contains the ",(0,r.kt)("a",{parentName:"p",href:"/docs/next/concepts/specs"},"Spec")," and ",(0,r.kt)("a",{parentName:"p",href:"/docs/next/concepts/release#state"},"State")," of an application, both of which are composed of ",(0,r.kt)("inlineCode",{parentName:"p"},"Resources"),", representing the expected description from the configuration code and the actual state of the resources respectively. In addition, the release file also contains the information of creation and modification time, operation phase, and application metadata, etc."),(0,r.kt)("h2",{id:"state"},"State"),(0,r.kt)("p",null,"State is a record of an operation's result. It is a mapping between ",(0,r.kt)("inlineCode",{parentName:"p"},"resources")," managed by ",(0,r.kt)("inlineCode",{parentName:"p"},"Kusion")," and the actual infra resources. State is often used as a data source for three-way merge/diff in operations like ",(0,r.kt)("inlineCode",{parentName:"p"},"Apply")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Preview"),"."),(0,r.kt)("p",null,"A ",(0,r.kt)("inlineCode",{parentName:"p"},"resource")," here represents an individual unit of infrastructure or application component, serving as a fundamental building block for defining and managing the actual state of your ",(0,r.kt)("inlineCode",{parentName:"p"},"project"),". These ",(0,r.kt)("inlineCode",{parentName:"p"},"resources")," are defined within the ",(0,r.kt)("inlineCode",{parentName:"p"},"State")," and accurately reflect the actual states of the infrastructure. By providing a unified and consistent approach, ",(0,r.kt)("inlineCode",{parentName:"p"},"Kusion")," enables seamless management of diverse resource types, encompassing Kubernetes objects and Terraform resources.Importantly, the structure of these resources in the ",(0,r.kt)("inlineCode",{parentName:"p"},"State")," mirrors that of the ",(0,r.kt)("inlineCode",{parentName:"p"},"resources")," in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Spec"),", ensuring coherence and facilitating efficient state management throughout the lifecycle of your ",(0,r.kt)("inlineCode",{parentName:"p"},"project"),"."),(0,r.kt)("p",null,"State can be stored in many storage ",(0,r.kt)("a",{parentName:"p",href:"/docs/next/concepts/backend/overview"},"backend")," mediums like filesystems, S3, and OSS, etc."),(0,r.kt)("h2",{id:"concurrency-control"},"Concurrency Control"),(0,r.kt)("p",null,"Release supports collaboration among multiple users and implements the concurrency control through operation ",(0,r.kt)("inlineCode",{parentName:"p"},"phase"),". When the field of ",(0,r.kt)("inlineCode",{parentName:"p"},"phase")," in the release file is not ",(0,r.kt)("inlineCode",{parentName:"p"},"succeeded")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"failed"),", kusion will not be able to execute ",(0,r.kt)("inlineCode",{parentName:"p"},"apply")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"destroy")," operation to the corresponding stack. For example, if a user unexpectedly exits during the ",(0,r.kt)("inlineCode",{parentName:"p"},"apply")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"destroy")," process, the ",(0,r.kt)("inlineCode",{parentName:"p"},"phase")," of the release file may be kept as ",(0,r.kt)("inlineCode",{parentName:"p"},"applying")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"destroying"),". In this case, the user can use the command of ",(0,r.kt)("inlineCode",{parentName:"p"},"kusion release unlock")," to unlock the release file for a specified application and workspace, setting the ",(0,r.kt)("inlineCode",{parentName:"p"},"phase")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"failed"),"."))}d.isMDXComponent=!0}}]);