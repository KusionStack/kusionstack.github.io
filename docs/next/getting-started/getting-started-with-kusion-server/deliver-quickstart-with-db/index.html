<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-docs docs-doc-id-getting-started/getting-started-with-kusion-server/deliver-quickstart-with-db" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Run Your Own App with MySQL on Kubernetes with Kusion Server | Transform Your Internal Developer Platform with KusionStack</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://kusionstack.io/docs/next/getting-started/getting-started-with-kusion-server/deliver-quickstart-with-db"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-docs-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-docs-current"><meta data-rh="true" property="og:title" content="Run Your Own App with MySQL on Kubernetes with Kusion Server | Transform Your Internal Developer Platform with KusionStack"><meta data-rh="true" name="description" content="In this tutorial, we will learn how to create and manage our own application with MySQL database on Kubernetes with Kusion. The locally deployed MySQL database is declared as an accessory in the config codes and will be automatically created and managed by Kusion."><meta data-rh="true" property="og:description" content="In this tutorial, we will learn how to create and manage our own application with MySQL database on Kubernetes with Kusion. The locally deployed MySQL database is declared as an accessory in the config codes and will be automatically created and managed by Kusion."><link data-rh="true" rel="icon" href="/img/kusionstack-icon-square.png"><link data-rh="true" rel="canonical" href="https://kusionstack.io/docs/next/getting-started/getting-started-with-kusion-server/deliver-quickstart-with-db"><link data-rh="true" rel="alternate" href="https://kusionstack.io/docs/next/getting-started/getting-started-with-kusion-server/deliver-quickstart-with-db" hreflang="en"><link data-rh="true" rel="alternate" href="https://kusionstack.io/zh/docs/next/getting-started/getting-started-with-kusion-server/deliver-quickstart-with-db" hreflang="zh"><link data-rh="true" rel="alternate" href="https://kusionstack.io/docs/next/getting-started/getting-started-with-kusion-server/deliver-quickstart-with-db" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Transform Your Internal Developer Platform with KusionStack RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Transform Your Internal Developer Platform with KusionStack Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XC4Z27TLBR"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-XC4Z27TLBR",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Transform Your Internal Developer Platform with KusionStack" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.5bb6c965.css">
<link rel="preload" href="/assets/js/runtime~main.e5400f55.js" as="script">
<link rel="preload" href="/assets/js/main.929ccb69.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">‚≠êÔ∏è If you like KusionStack, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/KusionStack/kusion">Github</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/kusionstack-icon.png" alt="KusionStack Icon" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/kusionstack-icon-white.png" alt="KusionStack Icon" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">KusionStack</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/next/">Kusion</a><a class="navbar__item navbar__link" href="/karpor/">Karpor</a><a class="navbar__item navbar__link" href="/kuperator/introduction/">Kuperator</a><a class="navbar__item navbar__link" href="/ctrlmesh/intro/">Ctrlmesh</a><a class="navbar__item navbar__link" href="/community/intro/">Community</a><a href="https://blog.kusionstack.io" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/next/">v0.14 üöß</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/getting-started/getting-started-with-kusion-server/deliver-quickstart-with-db">v0.14 üöß</a></li><li><a class="dropdown__link" href="/docs/">v0.13</a></li><li><a class="dropdown__link" href="/docs/v0.12/">v0.12</a></li><li><a class="dropdown__link" href="/docs/v0.11/">v0.11</a></li><li><a class="dropdown__link" href="/docs/v0.10/">v0.10</a></li><li><a class="dropdown__link" href="/docs/v0.9/">v0.9</a></li></ul></div><a href="https://github.com/KusionStack" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-docs-current,docs-karpor-v0.6,docs-community-current,docs-ctrlmesh-v0.1,docs-kuperator-v0.6"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/">What is Kusion?</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/next/getting-started/install-kusion">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/getting-started/install-kusion">Install Kusion</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/next/getting-started/getting-started-with-kusion-cli/deliver-quickstart">Start with Kusion CLI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/next/getting-started/getting-started-with-kusion-server/deliver-quickstart">Start with Kusion Server</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/getting-started/getting-started-with-kusion-server/deliver-quickstart">Run Your First App on Kubernetes with Kusion Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/next/getting-started/getting-started-with-kusion-server/deliver-quickstart-with-db">Run Your Own App with MySQL on Kubernetes with Kusion Server</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/concepts/overview">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/configuration-walkthrough/overview">Configuration Walkthrough</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/user-guides/using-kusion-cli/cloud-resources/database">User Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/reference/commands/">Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/faq/install-error">FAQ</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Transform Your Internal Developer Platform with KusionStack<!-- --> <b>v0.14 üöß</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/">latest version</a></b> (<!-- -->v0.13<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Getting Started</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Start with Kusion Server</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Run Your Own App with MySQL on Kubernetes with Kusion Server</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v0.14 üöß</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Run Your Own App with MySQL on Kubernetes with Kusion Server</h1><p>In this tutorial, we will learn how to create and manage our own application with MySQL database on Kubernetes with Kusion. The locally deployed MySQL database is declared as an accessory in the config codes and will be automatically created and managed by Kusion. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">‚Äã</a></h2><p>Before we start to play with this example, we need to have the Kusion Server installed and run an accessible Kubernetes cluster. Besides, we need to have a GitHub account to initiate our own config code repository as <code>Source</code> in Kusion. </p><ul><li>Install <a href="/docs/next/getting-started/install-kusion">Kusion Server</a>. </li><li>Run a <a href="https://kubernetes.io" target="_blank" rel="noopener noreferrer">Kubernetes</a> cluster. Some light and convenient options for Kubernetes local deployment include <a href="https://docs.k3s.io/quick-start" target="_blank" rel="noopener noreferrer">k3s</a>, <a href="https://k3d.io/v5.4.4/#installation" target="_blank" rel="noopener noreferrer">k3d</a>, and <a href="https://minikube.sigs.k8s.io/docs/tutorials/multi_node" target="_blank" rel="noopener noreferrer">MiniKube</a>. </li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Please walk through <a href="/docs/next/getting-started/getting-started-with-kusion-server/deliver-quickstart">this documentation</a> before proceeding with the upcoming instructions. </p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="initialize-source">Initialize Source<a href="#initialize-source" class="hash-link" aria-label="Direct link to Initialize Source" title="Direct link to Initialize Source">‚Äã</a></h2><p>First, we need to create our own application configuration code repository as <code>Source</code> in Kusion. </p><p><img loading="lazy" alt="create konfig demo" src="/assets/images/create_konfig_demo-e1e0a86accdb09340a79d9b13e7aa016.png" width="3840" height="2110" class="img_ev3q"></p><p>We can simply copy the <code>quickstart</code> example in <a href="https://github.com/KusionStack/konfig/tree/main/example/quickstart" target="_blank" rel="noopener noreferrer">KusionStack/konfig</a> into our new repo. </p><p><img loading="lazy" alt="initiated konfig demo" src="/assets/images/initiated_konfig_demo-adf95565d32c2000e63ced0e40071a70.png" width="3840" height="2110" class="img_ev3q"></p><p>Then, we need to create a new <code>Source</code> with the created repository url. </p><p><img loading="lazy" alt="create new source" src="/assets/images/create_new_source-d6d3164c31d4598e3c61b0ca1f90b92a.png" width="2880" height="1652" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="register-module-and-update-workspace">Register Module And Update Workspace<a href="#register-module-and-update-workspace" class="hash-link" aria-label="Direct link to Register Module And Update Workspace" title="Direct link to Register Module And Update Workspace">‚Äã</a></h2><p>Next, we can register the <code>mysql</code> module provided by KusionStack community in Kusion. </p><p><img loading="lazy" alt="register mysql module" src="/assets/images/register_mysql_module-3c8dcc34118dac35e9536089e8c98cd0.png" width="2880" height="1652" class="img_ev3q"></p><p>After the registration, we should add the <code>mysql</code> module to the <code>dev</code> workspace and re-generate the <code>kcl.mod</code>. </p><p><img loading="lazy" alt="update workspace configs" src="/assets/images/update_workspace_configs-65e66ca77521f1a80bb4f144da7eb89d.png" width="2880" height="1652" class="img_ev3q"></p><p><img loading="lazy" alt="updated kcl.mod" src="/assets/images/updated_kcl_mod-c4a9509defe35ff66d04913a4d632f69.png" width="2880" height="1486" class="img_ev3q"></p><p>We can copy and paste to save the updated <code>kcl.mod</code>. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-project-and-stack">Create Project and Stack<a href="#create-project-and-stack" class="hash-link" aria-label="Direct link to Create Project and Stack" title="Direct link to Create Project and Stack">‚Äã</a></h2><p>Next, we can create a new <code>Project</code> with our own config code repo. </p><p><img loading="lazy" alt="create new project" src="/assets/images/create_new_project-022016baf811d44eeacc09badb9e30f9.png" width="2880" height="1482" class="img_ev3q"></p><p>And similarly, create a new <code>Stack</code>. </p><p><img loading="lazy" alt="create new stack" src="/assets/images/create_new_stack-a36988f692d3afad3509c3e2265e6140.png" width="2880" height="1482" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-mysql-accessory">Add MySQL Accessory<a href="#add-mysql-accessory" class="hash-link" aria-label="Direct link to Add MySQL Accessory" title="Direct link to Add MySQL Accessory">‚Äã</a></h2><p>As you can see, the demo application page in <a href="/docs/next/getting-started/getting-started-with-kusion-server/deliver-quickstart#apply-resources">this doc</a> indicates that the MySQL database is not ready yet. Hence, we will now add a MySQL database as an <code>accessory</code> for the workload. </p><p>We should first update the module dependencies in the <code>default/kcl.mod</code> with the ones we previously stored, so that we can use the <code>MySQL</code> module in the configuration codes. </p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">dependencies</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;git://github.com/KusionStack/kam&quot;</span><span class="token plain">, tag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0.2.2&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> oci </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;oci://ghcr.io/kusionstack/mysql&quot;</span><span class="token plain">, tag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0.2.0&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">network </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> oci </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;oci://ghcr.io/kusionstack/network&quot;</span><span class="token plain">, tag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0.3.0&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">service</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> oci </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;oci://ghcr.io/kusionstack/service&quot;</span><span class="token plain">, tag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0.2.1&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can update the <code>default/main.k</code> with the following configuration codes: </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> kam</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">v1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">app_configuration </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> ac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">container </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> network </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># main.k declares the customized configuration codes for default-with-db stack. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">quickstart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ac</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AppConfiguration </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    workload</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Service </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            quickstart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Container </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;kusionstack/kusion-quickstart:latest&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token string" style="color:#e3116c">&quot;DB_HOST&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;$(KUSION_DB_HOST_QUICKSTARTWITHDBDEFAULTWITHDBQU)&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token string" style="color:#e3116c">&quot;DB_USERNAME&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;$(KUSION_DB_USERNAME_QUICKSTARTWITHDBDEFAULTWITHDBQU)&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token string" style="color:#e3116c">&quot;DB_PASSWORD&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;$(KUSION_DB_PASSWORD_QUICKSTARTWITHDBDEFAULTWITHDBQU)&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    accessories</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;network&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Network </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                n</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Port </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;mysql&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MySQL </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token builtin">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;local&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;8.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The configuration codes above declare a local <code>mysql.MySQL</code> with the engine version of <code>8.0</code> as an accessory for the application workload. The necessary Kubernetes resources for deploying and using the local MySQL database will be generated and users can get the <code>host</code>, <code>username</code> and <code>password</code> of the database through the <a href="/docs/next/reference/modules/developer-schemas/database/mysql#credentials-and-connectivity">MySQL Credentials And Connectivity</a> of Kusion in application containers. </p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>For more information about the naming convention of Kusion built-in MySQL module, you can refer to <a href="/docs/next/reference/modules/naming-conventions">Module Naming Convention</a>. </p></div></div><p>After that, we need to update the remote repository with the modified config code files. </p><p><img loading="lazy" alt="add mysql accessory" src="/assets/images/add_mysql_accessory-dac97faa64b2948005f414808e28f1bd.png" width="3840" height="2110" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="application-delivery">Application Delivery<a href="#application-delivery" class="hash-link" aria-label="Direct link to Application Delivery" title="Direct link to Application Delivery">‚Äã</a></h2><p>Now we can start to run the application delivery! </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="preview-changes">Preview Changes<a href="#preview-changes" class="hash-link" aria-label="Direct link to Preview Changes" title="Direct link to Preview Changes">‚Äã</a></h3><p>We can first preview the changes to the application resources that are going to be deployed to the <code>dev</code> workspace. </p><p><img loading="lazy" alt="preview quickstart with db" src="/assets/images/preview_quickstart_with_db-3ef06cbb268503a523f8008dce603cd2.png" width="2880" height="1482" class="img_ev3q"></p><p>We can click the <code>Detail</code> button to view the <code>Preview</code> results, and we can find that compared to the results in <a href="/docs/next/getting-started/getting-started-with-kusion-server/deliver-quickstart#preview-changes">this doc</a>, the <code>mysql</code> accessory has brought us database related Kubernetes resources. </p><p><img loading="lazy" alt="preview with db" src="/assets/images/preview_with_db-7bba243ade7df520c0d81a5f24c72512.png" width="2874" height="1478" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="apply-resources">Apply Resources<a href="#apply-resources" class="hash-link" aria-label="Direct link to Apply Resources" title="Direct link to Apply Resources">‚Äã</a></h3><p>Then we can create a <code>Run</code> operation of the type of <code>Apply</code> to deploy the previewed application resources to the Kubernetes cluster corresponding to the <code>dev</code> workspace. </p><p><img loading="lazy" alt="create apply with db" src="/assets/images/create_apply_with_db-1394239f38555e249c341c73e7e6903b.png" width="2880" height="1484" class="img_ev3q"></p><p>After successfully completing the <code>Apply</code>, we can check the application resource graph, which will display the topology of the application resources related to mysql database, including Kubernetes <code>Deployment</code>, <code>Service</code>, <code>Secret</code>, and <code>PVC</code>. </p><p><img loading="lazy" alt="resource_graph_with_db" src="/assets/images/resource_graph_with_db-108eb2e826df051b5d218564ee54b211.png" width="2880" height="1484" class="img_ev3q"></p><p>Next, we can expose the service of the application we just applied through port-forwarding Kubernetes Pod and verify it in the browser. </p><p><img loading="lazy" alt="demo application with db" src="/assets/images/demo_application_with_db-21ba7f24e894b433b5584caa4dffa970.png" width="2880" height="1652" class="img_ev3q"></p><p>We can find that the application has successfully connected to the MySQL database, and the connection information is also printed on the page. Now please feel free to enjoy the demo application!</p><p><img loading="lazy" alt="demo with db" src="/assets/images/demo_with_db-c2e429be6e2828201a253d4d8c6cdb9e.gif" width="756" height="480" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="delete-application">Delete Application<a href="#delete-application" class="hash-link" aria-label="Direct link to Delete Application" title="Direct link to Delete Application">‚Äã</a></h2><p>We can delete the quickstart demo workload and related accessory resources with the <code>Destroy</code> run: </p><p><img loading="lazy" alt="destroy application" src="/assets/images/destroy_application-f31d751d03246a771bfc7ee9e08604fa.png" width="2880" height="1484" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/KusionStack/kusionstack.io/blob/main/docs/kusion/2-getting-started/3-getting-started-with-kusion-server/2-deliver-quickstart-with-db.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_VsjB"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-01-22T03:54:55.000Z">Jan 22, 2025</time></b> by <b>Xiaoming_Wuqi</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/next/getting-started/getting-started-with-kusion-server/deliver-quickstart"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Run Your First App on Kubernetes with Kusion Server</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/next/concepts/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#initialize-source" class="table-of-contents__link toc-highlight">Initialize Source</a></li><li><a href="#register-module-and-update-workspace" class="table-of-contents__link toc-highlight">Register Module And Update Workspace</a></li><li><a href="#create-project-and-stack" class="table-of-contents__link toc-highlight">Create Project and Stack</a></li><li><a href="#add-mysql-accessory" class="table-of-contents__link toc-highlight">Add MySQL Accessory</a></li><li><a href="#application-delivery" class="table-of-contents__link toc-highlight">Application Delivery</a><ul><li><a href="#preview-changes" class="table-of-contents__link toc-highlight">Preview Changes</a></li><li><a href="#apply-resources" class="table-of-contents__link toc-highlight">Apply Resources</a></li></ul></li><li><a href="#delete-application" class="table-of-contents__link toc-highlight">Delete Application</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Document</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">Kusion</a></li><li class="footer__item"><a class="footer__link-item" href="/karpor/">Karpor</a></li><li class="footer__item"><a class="footer__link-item" href="/kuperator/introduction/">Kuperator</a></li><li class="footer__item"><a class="footer__link-item" href="/ctrlmesh/intro/">CtrlMesh</a></li></ul></div><div class="col footer__col"><div class="footer__title">Resource</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://blog.kusionstack.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/KusionStack" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/kusionstack/shared_invite/zt-19lqcc3a9-_kTNwagaT5qwBE~my5Lnxg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">KCL</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2024 KusionStack Authors. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/"> Trademark Usage</a> page.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e5400f55.js"></script>
<script src="/assets/js/main.929ccb69.js"></script>
</body>
</html>