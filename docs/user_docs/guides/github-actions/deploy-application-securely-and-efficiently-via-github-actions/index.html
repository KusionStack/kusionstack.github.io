<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-user_docs/guides/github-actions/deploy-application-securely-and-efficiently-via-github-actions">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Deploy Application Securely and Efficiently via GitHub Actions | Evolve your Internal Developer Platform with KusionStack</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://kusionstack.io/docs/user_docs/guides/github-actions/deploy-application-securely-and-efficiently-via-github-actions"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Deploy Application Securely and Efficiently via GitHub Actions | Evolve your Internal Developer Platform with KusionStack"><meta data-rh="true" name="description" content="This document provides the instruction to deploy your application securely and efficiently via GitHub Actions."><meta data-rh="true" property="og:description" content="This document provides the instruction to deploy your application securely and efficiently via GitHub Actions."><link data-rh="true" rel="icon" href="/img/kusionstack-icon-square.png"><link data-rh="true" rel="canonical" href="https://kusionstack.io/docs/user_docs/guides/github-actions/deploy-application-securely-and-efficiently-via-github-actions"><link data-rh="true" rel="alternate" href="https://kusionstack.io/docs/user_docs/guides/github-actions/deploy-application-securely-and-efficiently-via-github-actions" hreflang="en"><link data-rh="true" rel="alternate" href="https://kusionstack.io/docs/user_docs/guides/github-actions/deploy-application-securely-and-efficiently-via-github-actions" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://RE5E6BQUZV-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Evolve your Internal Developer Platform with KusionStack RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Evolve your Internal Developer Platform with KusionStack Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Evolve your Internal Developer Platform with KusionStack" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.3d8f6753.css">
<link rel="preload" href="/assets/js/runtime~main.8bb584a7.js" as="script">
<link rel="preload" href="/assets/js/main.d4728fa2.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you like KusionStack, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/KusionStack/kusion">Github</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/kusionstack-icon.png" alt="KusionStack Icon" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/kusionstack-icon-white.png" alt="KusionStack Icon" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">KusionStack</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" docid="intro/kusion-intro" href="/docs/user_docs/intro/overview">Kusion</a><a class="navbar__item navbar__link" href="/docs/operating/introduction/">Operating</a><a class="navbar__item navbar__link" href="/docs/ctrlmesh/intro/">ControllerMesh</a><a class="navbar__item navbar__link" href="/docs/community/intro/">Community</a><a href="https://blog.kusionstack.io" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/KusionStack" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/user_docs/intro/overview">What is Kusion?</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/user_docs/getting-started/">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/user_docs/concepts/">Concepts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Concepts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/user_docs/config-walkthrough/overview">Configuration Walkthrough</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/user_docs/guides/">User Guide</a><button aria-label="Toggle the collapsible sidebar category &#x27;User Guide&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/user_docs/guides/cloud-resources/database">Cloud Resources</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/user_docs/guides/working-with-k8s/">Kubernetes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Kubernetes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/user_docs/guides/observability/prometheus">Automated Observability</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/user_docs/guides/github-actions/deploy-application-securely-and-efficiently-via-github-actions">GitHub Actions</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/user_docs/guides/github-actions/deploy-application-securely-and-efficiently-via-github-actions">Deploy Application Securely and Efficiently via GitHub Actions</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/user_docs/reference/cli/">Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/user_docs/support/">FAQ</a><button aria-label="Toggle the collapsible sidebar category &#x27;FAQ&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/user_docs/guides/"><span itemprop="name">User Guide</span></a><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">GitHub Actions</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Deploy Application Securely and Efficiently via GitHub Actions</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Deploy Application Securely and Efficiently via GitHub Actions</h1><p>This document provides the instruction to deploy your application securely and efficiently via GitHub Actions.</p><p>Using git repository is a very reliable and common way to manage code, and the same goes for Kusion-managed configuration code. <a href="https://docs.github.com/en/actions" target="_blank" rel="noopener noreferrer">GitHub Actions</a> is a CI/CD platform. By customizing <a href="https://docs.github.com/en/actions/using-workflows/about-workflows" target="_blank" rel="noopener noreferrer">GitHub Actions workflow</a>, the pipeline such as building, testing, and deploying will be executed automatically.</p><p>Kusion has a commendable integration with Github Actions. You can use Github Actions to test configuration correctness, preview change, and deploy application. This tutorial demonstrates how to deploy and operate an application through GitHub Actions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="github-actions-workflow">GitHub Actions Workflow<a href="#github-actions-workflow" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p><a href="https://github.com/KusionStack/konfig" target="_blank" rel="noopener noreferrer">KusionStack/konfig</a> is the official example repository, and provides the GitHub Actions workflow <a href="https://github.com/KusionStack/konfig/blob/main/.github/workflows/main.yml" target="_blank" rel="noopener noreferrer">main.yml</a>. The main.yml is triggered by a push or a pull request on the main branch, and includes multiple jobs, which ensures the reliability of configuration code, and deploys the changed application.</p><p><img loading="lazy" alt="workflow" src="/assets/images/workflow-052aa326816199187357363891109493.png" width="2594" height="1364" class="img_ev3q"></p><p>The workflow to deploy an application is shown above, which includes the following jobs:</p><ul><li>Get changed project and stack</li><li>Check project and stack structure</li><li>Test code correctness</li><li>Preview changed stack</li><li>Apply changed stack</li></ul><p>These jobs ensure the security and efficiency of the application deployment. Next, this tutorial will introduce the usage and function of these jobs. To show how they work more visually, <em><a href="https://github.com/KusionStack/konfig/actions/runs/6325390734" target="_blank" rel="noopener noreferrer">updating port configuration of multi-stack</a> (referred to &quot;the example&quot; in the below)</em> is given as an example.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="get-changed-project-and-stack">Get Changed Project and Stack<a href="#get-changed-project-and-stack" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>As Kusion organizes code by <strong>project</strong> and <strong>stack</strong>, to deploy the affected applications, analyze the changed project and stack is the first step.</p><p>The jobs, <a href="https://github.com/KusionStack/konfig/blob/main/.github/workflows/main.yml#L10" target="_blank" rel="noopener noreferrer">get-changed-project-stack</a> perfectly accomplish the analysis. The main steps are as follows:</p><ul><li>Obtain the list of changed files through <code>git diff</code>;</li><li>Based on the changed file list, obtain the changed projects and stacks which are indicated by <code>project.yaml</code> and <code>stack.yaml</code> respectively.</li></ul><p>The <a href="https://github.com/KusionStack/konfig/actions/runs/6325320773/job/17176584497" target="_blank" rel="noopener noreferrer">example</a> changes the file <code>example/multi-stack/base/base.k</code>, where the affected project is <code>example/multi-stack</code>, and the stack is <code>example/multi-stack/dev</code> and <code>example/multi-stack/prod</code>. Delightfully, the result, which is shown below, meets our expectation.</p><p><img loading="lazy" alt="changed-project-stack" src="/assets/images/changed-project-stack-0055bea978f129b99b6e74c5b7c4ab88.png" width="1758" height="1038" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="check-project-and-stack-structure">Check Project and Stack Structure<a href="#check-project-and-stack-structure" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>The job <a href="https://github.com/KusionStack/konfig/blob/main/.github/workflows/main.yml#L39" target="_blank" rel="noopener noreferrer">check-structure</a> guarantees the structure legality of the changed project and stack, so that Kusion CLI tools can be used correctly. The check items are as follows:</p><ul><li>The field <code>name</code> is required in project.yaml;</li><li>The field <code>name</code> is required in stack.yaml.</li></ul><p>The success of structure-check means the correctness of structure. A <a href="https://docs.pytest.org/en/7.3.x/" target="_blank" rel="noopener noreferrer">pytest</a> report <code>check-structure-report</code> is also generated, and you can get it from <a href="https://docs.github.com/en/actions/managing-workflow-runs/downloading-workflow-artifacts" target="_blank" rel="noopener noreferrer">GithHub Actions Artifacts</a> .</p><p>The <a href="https://github.com/KusionStack/konfig/actions/runs/6325320773/job/17176592318" target="_blank" rel="noopener noreferrer">example</a> passes the directory structure verification. It is clear from the report that the changed project and stack have get checked, and the result is passed.</p><p><img loading="lazy" alt="check-structure" src="/assets/images/check-structure-2e3226c0efbdbf41b4d7ae70bd16df28.png" width="1452" height="482" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-code-correctness">Test Code Correctness<a href="#test-code-correctness" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Besides a rightful structure, the code must have correct syntax and semantics, and the job <a href="https://github.com/KusionStack/konfig/blob/main/.github/workflows/main.yml#L65" target="_blank" rel="noopener noreferrer">test-correctness</a> ensures the correctness. <code>kusion compile</code> get executed on the changed stacks. If succeeded, there are no syntax errors; or the configuration code is illegal, and the following application deployment will fail.</p><p>The report whose name is <code>test-correctness-report</code> get generated.</p><p>The <a href="https://github.com/KusionStack/konfig/actions/runs/6325320773/job/17176592034" target="_blank" rel="noopener noreferrer">example</a> passes the code correctness test. The report shows that the tested stack is <code>example/multi-stack/dev</code> and <code>example/multi-stack/prod</code>, and the result is passed.</p><p><img loading="lazy" alt="test-correctness" src="/assets/images/test-correctness-a6846c2c32c4129b816b6463927325b8.png" width="1626" height="404" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="preview-changed-stack">Preview Changed Stack<a href="#preview-changed-stack" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>After passing the above jobs, security of the configuration change is guaranteed, and it&#x27;s time to deploy your application. Before applying the change to the real infrastructure, it&#x27;s necessary to get the expected result of the application deployment. The job <a href="https://github.com/KusionStack/konfig/blob/main/.github/workflows/main.yml#L90" target="_blank" rel="noopener noreferrer">preview</a> calls <code>kusion preview</code> to get the expected change result, the result is uploaded to the artifact <code>preview-report</code>. If the result meets your requirement, you can go to the next job and deploy the application.</p><p>The <a href="https://github.com/KusionStack/konfig/actions/runs/6325320773/job/17176612053" target="_blank" rel="noopener noreferrer">example</a> changes stack <code>example/multi-stack/dev</code> and <code>example/multi-stack/prod</code>. The following picture shows the preview result of <code>example/multi-stack/prod</code>, where the result is to create a Kubernetes Namespace, Service and Deployment if call <code>kusion apply</code>.</p><p><img loading="lazy" alt="preview" src="/assets/images/preview-4f2aae42391f5decddfcac6107d53a25.png" width="1424" height="264" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="apply-changed-stack">Apply Changed Stack<a href="#apply-changed-stack" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>Finally, the last step is arrived, i.e. deploy application. The job <a href="https://github.com/KusionStack/konfig/blob/main/.github/workflows/main.yml#L121" target="_blank" rel="noopener noreferrer">apply</a> calls <code>kusion apply</code> to apply the configuration change to the real infrastructure. If the job succeeded, the result will be uploaded to the artifact <code>apply-report</code>.</p><p>For the stack <code>example/multi-stack/prod</code> in the <a href="https://github.com/KusionStack/konfig/actions/runs/6325320773/job/17176645252" target="_blank" rel="noopener noreferrer">example</a>, a Kubernetes Namespace, Service and Deployment get created, which is consistent with the preview result.</p><p><img loading="lazy" alt="apply" src="/assets/images/apply-3197adde2cbda84d3e032918679c17cb.png" width="1456" height="554" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">​</a></h2><p>This tutorial demonstrates how Kusion integrates with GitHub Actions to deploy an application. By structure check, correctness test, preview and apply, Kusion with GitHub Actions enables you deploy application efficiently and securely.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/KusionStack/kusionstack.io/blob/main/docs/user_docs/guides/github-actions/deploy-application-securely-and-efficiently-via-github-actions.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-12-05T12:47:19.000Z">Dec 5, 2023</time></b> by <b>Chaer</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/user_docs/guides/observability/prometheus"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Configure Monitoring Behavior With Prometheus</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/user_docs/reference/cli/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Command Line Tools</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#github-actions-workflow" class="table-of-contents__link toc-highlight">GitHub Actions Workflow</a></li><li><a href="#get-changed-project-and-stack" class="table-of-contents__link toc-highlight">Get Changed Project and Stack</a></li><li><a href="#check-project-and-stack-structure" class="table-of-contents__link toc-highlight">Check Project and Stack Structure</a></li><li><a href="#test-code-correctness" class="table-of-contents__link toc-highlight">Test Code Correctness</a></li><li><a href="#preview-changed-stack" class="table-of-contents__link toc-highlight">Preview Changed Stack</a></li><li><a href="#apply-changed-stack" class="table-of-contents__link toc-highlight">Apply Changed Stack</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Document</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/user_docs/intro/overview">Kusion</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/ctrlmesh/intro/">ControllerMesh</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/user_docs/support">FAQ</a></li></ul></div><div class="col footer__col"><div class="footer__title">Resource</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/KusionStack" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/kusionstack/shared_invite/zt-19lqcc3a9-_kTNwagaT5qwBE~my5Lnxg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://kcl-lang.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">KCL</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.antgroup.com/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/oss_logo.svg" alt="AntGroup Open Source Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="160" height="51"><img src="/img/oss_logo.svg" alt="AntGroup Open Source Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="160" height="51"></a></div><div class="footer__copyright">Copyright © 2022 KusionStack Authors</div></div></div></footer></div>
<script src="/assets/js/runtime~main.8bb584a7.js"></script>
<script src="/assets/js/main.d4728fa2.js"></script>
</body>
</html>