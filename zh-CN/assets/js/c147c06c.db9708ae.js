"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4793],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return k}});var r=t(67294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e,n){if(null==e)return{};var t,r,l=function(e,n){if(null==e)return{};var t,r,l={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var c=r.createContext({}),p=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=p(e.components);return r.createElement(c.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,l=e.mdxType,o=e.originalType,c=e.parentName,d=a(e,["components","mdxType","originalType","parentName"]),u=p(t),k=l,s=u["".concat(c,".").concat(k)]||u[k]||m[k]||o;return t?r.createElement(s,i(i({ref:n},d),{},{components:t})):r.createElement(s,i({ref:n},d))}));function k(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var o=t.length,i=new Array(o);i[0]=u;var a={};for(var c in n)hasOwnProperty.call(n,c)&&(a[c]=n[c]);a.originalType=e,a.mdxType="string"==typeof e?e:l,i[1]=a;for(var p=2;p<o;p++)i[p]=t[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},85736:function(e,n,t){t.r(n),t.d(n,{assets:function(){return d},contentTitle:function(){return c},default:function(){return k},frontMatter:function(){return a},metadata:function(){return p},toc:function(){return m}});var r=t(87462),l=t(63366),o=(t(67294),t(3905)),i=["components"],a={sidebar_position:6},c="kcl.mod \u6587\u4ef6",p={unversionedId:"reference/lang/lang/kcl_mod",id:"reference/lang/lang/kcl_mod",title:"kcl.mod \u6587\u4ef6",description:"\u5f53\u914d\u7f6e\u53c2\u6570\u53d8\u5f97\u590d\u6742\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u62c6\u5206\u6587\u4ef6\u548c\u76ee\u5f55\u7684\u65b9\u5f0f\u91cd\u65b0\u7ec4\u88c5 KCL \u4ee3\u7801\uff0c\u4e0d\u540c\u6587\u4ef6\u4e2d\u7684 KCL \u4ee3\u7801\u5bf9\u5e94\u5305\u6216\u6a21\u5757\uff0c\u5b83\u4eec\u53ef\u4ee5\u901a\u8fc7 import \u8bed\u53e5\u88ab\u5bfc\u5165\u4f7f\u7528\u3002\u6a21\u5757\u548c\u5305\u53ef\u4ee5\u901a\u8fc7\u76f8\u5bf9\u6a21\u5757\u8def\u5f84\u5bfc\u5165\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7edd\u5bf9\u6a21\u5757\u8def\u5f84\u5bfc\u5165\u3002\u800c\u6a21\u5757\u7684\u7edd\u5bf9\u8def\u5f84\u662f\u901a\u8fc7 kcl.mod \u6587\u4ef6\u6307\u5b9a\u7684\u3002",source:"@site/docs/reference/lang/lang/kcl_mod.md",sourceDirName:"reference/lang/lang",slug:"/reference/lang/lang/kcl_mod",permalink:"/zh-CN/docs/reference/lang/lang/kcl_mod",editUrl:"https://github.com/KusionStack/kusionstack.io/blob/main/docs/reference/lang/lang/kcl_mod.md",tags:[],version:"current",lastUpdatedBy:"Hao Yuan",lastUpdatedAt:1663054820,formattedLastUpdatedAt:"2022/9/13",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"reference",previous:{title:"\u7c7b\u578b\u7cfb\u7edf",permalink:"/zh-CN/docs/reference/lang/lang/type_system"},next:{title:"\u6a21\u5757\u7cfb\u7edf",permalink:"/zh-CN/docs/reference/lang/model/"}},d={},m=[{value:"1. \u5b9a\u4f4d\u6a21\u5757\u6839\u76ee\u5f55",id:"1-\u5b9a\u4f4d\u6a21\u5757\u6839\u76ee\u5f55",level:2},{value:"2. kcl.mod \u6587\u4ef6\u7684\u7ed3\u6784",id:"2-kclmod-\u6587\u4ef6\u7684\u7ed3\u6784",level:2}],u={toc:m};function k(e){var n=e.components,t=(0,l.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"kclmod-\u6587\u4ef6"},"kcl.mod \u6587\u4ef6"),(0,o.kt)("p",null,"\u5f53\u914d\u7f6e\u53c2\u6570\u53d8\u5f97\u590d\u6742\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u62c6\u5206\u6587\u4ef6\u548c\u76ee\u5f55\u7684\u65b9\u5f0f\u91cd\u65b0\u7ec4\u88c5 KCL \u4ee3\u7801\uff0c\u4e0d\u540c\u6587\u4ef6\u4e2d\u7684 KCL \u4ee3\u7801\u5bf9\u5e94\u5305\u6216\u6a21\u5757\uff0c\u5b83\u4eec\u53ef\u4ee5\u901a\u8fc7 import \u8bed\u53e5\u88ab\u5bfc\u5165\u4f7f\u7528\u3002\u6a21\u5757\u548c\u5305\u53ef\u4ee5\u901a\u8fc7\u76f8\u5bf9\u6a21\u5757\u8def\u5f84\u5bfc\u5165\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7edd\u5bf9\u6a21\u5757\u8def\u5f84\u5bfc\u5165\u3002\u800c\u6a21\u5757\u7684\u7edd\u5bf9\u8def\u5f84\u662f\u901a\u8fc7 kcl.mod \u6587\u4ef6\u6307\u5b9a\u7684\u3002"),(0,o.kt)("h2",{id:"1-\u5b9a\u4f4d\u6a21\u5757\u6839\u76ee\u5f55"},"1. \u5b9a\u4f4d\u6a21\u5757\u6839\u76ee\u5f55"),(0,o.kt)("p",null,"\u6bd4\u5982\u6709\u4ee5\u4e0b\u7ed3\u6784\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},".\n|\u2500\u2500 kcl.mod\n\u251c\u2500\u2500 mod1.k\n\u251c\u2500\u2500 mod2.k\n\u251c\u2500\u2500 pkg1\n\u2502\xa0\xa0 \u251c\u2500\u2500 def1.k\n\u2502\xa0\xa0 \u251c\u2500\u2500 def2.k\n\u2502\xa0\xa0 \u2514\u2500\u2500 def3init.k\n\u2514\u2500\u2500 pkg2\n    \u251c\u2500\u2500 file2.k\n    \u2514\u2500\u2500 subpkg3\n        \u2514\u2500\u2500 file3.k\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"kcl.mod \u6587\u4ef6\u6240\u5728\u7684\u76ee\u5f55\u5bf9\u5e94\u6a21\u5757\u7684\u6839\u76ee\u5f55"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"mod1.k")," \u5bf9\u5e94\u5bfc\u5165\u65b9\u5f0f ",(0,o.kt)("inlineCode",{parentName:"li"},"import mod1")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"mod2.k")," \u5bf9\u5e94\u5bfc\u5165\u65b9\u5f0f ",(0,o.kt)("inlineCode",{parentName:"li"},"import mod2")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"pkg1/*.k")," \u5bf9\u5e94\u5bfc\u5165\u65b9\u5f0f ",(0,o.kt)("inlineCode",{parentName:"li"},"import pkg1")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"pkg2/*.k")," \u5bf9\u5e94\u5bfc\u5165\u65b9\u5f0f ",(0,o.kt)("inlineCode",{parentName:"li"},"import pkg2")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"pkg1/subpkg3/*.k")," \u5bf9\u5e94\u5bfc\u5165\u65b9\u5f0f ",(0,o.kt)("inlineCode",{parentName:"li"},"import pkg1.subpkg3"))),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note:")," \u5bf9\u4e8e\u540c\u76ee\u5f55\u4e0b\u7684 KCL \u6587\u4ef6\uff0c\u4e0d\u8981\u6df7\u7528\u76ee\u5f55\u548c\u6587\u4ef6\u7684\u5bfc\u5165\u65b9\u5f0f\uff08\u6bd4\u5982 ",(0,o.kt)("inlineCode",{parentName:"p"},"import pkg1")," \u548c ",(0,o.kt)("inlineCode",{parentName:"p"},"import pkg1.def1")," \u5c31\u662f\u6df7\u7528\u7684\u4f8b\u5b50\uff09\u3002")),(0,o.kt)("h2",{id:"2-kclmod-\u6587\u4ef6\u7684\u7ed3\u6784"},"2. kcl.mod \u6587\u4ef6\u7684\u7ed3\u6784"),(0,o.kt)("p",null,"\u6700\u7b80\u5355\u7684 kcl.mod \u662f\u4e00\u4e2a\u7a7a\u6587\u4ef6\uff0c\u53ea\u662f\u7528\u4e8e\u5b9a\u4f4d\u6a21\u5757\u7684\u7edd\u5bf9\u8def\u5f84\u3002\u4e0d\u8fc7 kcl.mod \u5176\u5b9e\u662f\u4e00\u79cd ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/toml-lang/toml"},"TOML")," \u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u5176\u4e2d\u53ef\u4ee5\u5305\u542b\u4e00\u4e9b\u914d\u7f6e\u4fe1\u606f\u3002"),(0,o.kt)("p",null,"\u6bd4\u5982\u4ee5\u4e0b\u7684 kcl.mod \u6587\u4ef6\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-toml"},'[build]\nenable_pkg_cache=true\ncached_pkg_prefix="base.pkg."\n\n[expected]\nkclvm_version="v0.3.9"\nkcl_plugin_version="v0.2.14"\n')),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"build")," \u6bb5\u6253\u5f00\u4e86\u7f13\u5b58\uff0c\u5e76\u5b9a\u4e49\u4e86\u8981\u6362\u6210\u7684\u5305\u8def\u5f84\u524d\u7f00\u3002",(0,o.kt)("inlineCode",{parentName:"p"},"expected")," \u6bb5\u5b9a\u4e49\u4e86\u671f\u671b\u7684 KCLVM \u7248\u672c\u548c\u63d2\u4ef6\u7248\u672c\u3002"),(0,o.kt)("p",null,"\u5b8c\u6574\u7684 kcl.mod \u5bf9\u5e94\u4ee5\u4e0b\u7684 Protobuf \u7ed3\u6784\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},'syntax = "proto3";\n\npackage kclvm.modfile;\n\n// kcl.mod \u6587\u4ef6\u5bf9\u5e94\u7684\u5185\u5b58\u683c\u5f0f\n// kcl.mod \u6587\u4ef6\u4e3aTOML\u683c\u5f0f, \u5b57\u6bb5\u540d\u5b57\u548c\u7c7b\u578b\u4fdd\u6301\u4e00\u81f4\nmessage KclModFile {\n    string root = 1;                           // \u6839\u76ee\u5f55\u8def\u5f84, \u7531\u7a0b\u5e8f\u586b\u5145\n    string root_pkg = 2;                       // \u6839\u5305import\u8def\u5f84, \u5bf9\u5e94\u6240\u6709\u5b50\u5305\u7684\u524d\u7f00, \u53ef\u4ee5\u5ffd\u7565\n\n    KclModFile_build_section build = 3;        // build \u914d\u7f6e\n    KclModFile_expected_section expected = 4;  // expected \u914d\u7f6e\n}\n\nmessage KclModFile_build_section {\n    bool enable_pkg_cache = 1;    // \u542f\u52a8pkg\u7f13\u5b58\n    string cached_pkg_prefix = 2; // \u7f13\u5b58\u7684\u524d\u7f00\u8def\u5f84\n    string target = 3;  // \u7f16\u8bd1\u7684\u76ee\u6807\uff0c\u53ef\u9009 native, wasm\n}\n\nmessage KclModFile_expected_section {\n    string min_build_time = 1;      // \u671f\u671b\u6784\u5efa\u65f6\u95f4\u4e0b\u754c 2021-08-14 20:30:08\n    string max_build_time = 2;      // \u671f\u671b\u6784\u5efa\u65f6\u95f4\u4e0a\u754c 2021-08-16 20:30:08\n    string kclvm_version = 3;       // KCLVM \u7248\u672c\u4f9d\u8d56\n    string kcl_plugin_version = 4;  // KCLVM Plugin \u7248\u672c\u4f9d\u8d56\n    string global_version = 5;      // \u5168\u5c40\u7248\u672c\n}\n')),(0,o.kt)("p",null,"kcl.mod \u6587\u4ef6\u5bf9\u5e94 KclModFile \u7ed3\u6784\uff0c\u5176\u4e2d\u5305\u542b\u6a21\u5757\u8def\u5f84\u548c\u672c\u5730\u8def\u5f84\u7684\u6620\u5c04\u5173\u7cfb\uff08\u76ee\u524d\u8fd8\u6ca1\u6709\u4f7f\u7528\uff09\u3002\u4e0a\u9762\u4f8b\u5b50\u4e2d\u7684 build \u548c expected \u5206\u522b\u5bf9\u5e94 KclModFile_build_section \u548c KclModFile_expected_section \u7ed3\u6784\u3002"))}k.isMDXComponent=!0}}]);